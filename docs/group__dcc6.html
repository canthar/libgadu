<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libgadu: Połączenia bezpośrednie do wersji Gadu-Gadu 6.x</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Połączenia bezpośrednie do wersji Gadu-Gadu 6.x<br/>
<small>
[<a class="el" href="group__dcc.html">Połączenia bezpośrednie między klientami</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgg__dcc.html">gg_dcc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.  <a href="structgg__dcc.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga2a4b4a2ad85a06ba5f2e9c451dc29b6f">gg_dcc_request</a> (struct <a class="el" href="structgg__session.html">gg_session</a> *sess, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> uin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wysyła żądanie zwrotnego połączenia bezpośredniego.  <a href="#ga2a4b4a2ad85a06ba5f2e9c451dc29b6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#gae3da65bbe7c3218cb2e502f021032b68">gg_dcc_fill_file_info</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, const char *filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wypełnia pola struktury <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> niezbędne do wysłania pliku.  <a href="#gae3da65bbe7c3218cb2e502f021032b68"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#gacb0489366604e61863ca167173f16076">gg_dcc_fill_file_info2</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, const char *filename, const char *local_filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wypełnia pola struktury <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> niezbędne do wysłania pliku.  <a href="#gacb0489366604e61863ca167173f16076"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#gab71b56ab1af27f6c9c45d03d43effea5">gg_dcc_get_file</a> (uint32_t ip, uint16_t port, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> my_uin, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> peer_uin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rozpoczyna odbieranie pliku przez zwrotne połączenie bezpośrednie.  <a href="#gab71b56ab1af27f6c9c45d03d43effea5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga9e87148a79e8efa4890be95860c425f4">gg_dcc_send_file</a> (uint32_t ip, uint16_t port, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> my_uin, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> peer_uin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rozpoczyna wysyłanie pliku.  <a href="#ga9e87148a79e8efa4890be95860c425f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga53ac68b8f631a7dff70ba75363a15b2e">gg_dcc_voice_chat</a> (uint32_t ip, uint16_t port, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> my_uin, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> peer_uin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rozpoczyna połączenie głosowe.  <a href="#ga53ac68b8f631a7dff70ba75363a15b2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga2b05f4bc46937c62e0794af8b344d9b4">gg_dcc_set_type</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ustawia typ przychodzącego połączenia bezpośredniego.  <a href="#ga2b05f4bc46937c62e0794af8b344d9b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga1f9f10d4d70adeed7e76423fc047c95e">gg_dcc_socket_create</a> (<a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> uin, uint16_t port)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tworzy gniazdo nasłuchujące dla połączeń bezpośrednich.  <a href="#ga1f9f10d4d70adeed7e76423fc047c95e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga3ec32ead7968e434b54354fe457a8fe1">gg_dcc_voice_send</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, char *buf, int length)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wysyła ramkę danych połączenia głosowego.  <a href="#ga3ec32ead7968e434b54354fe457a8fe1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__event.html">gg_event</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga9804ea6dffcb077cd5f7a90d4120dc9b">gg_dcc_watch_fd</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *h)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Funkcja wywoływana po zaobserwowaniu zmian na deskryptorze połączenia.  <a href="#ga9804ea6dffcb077cd5f7a90d4120dc9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcc6.html#ga5d4489eadc5c531a60a9905894fda6b3">gg_dcc_free</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zwalnia zasoby używane przez połączenie bezpośrednie.  <a href="#ga5d4489eadc5c531a60a9905894fda6b3"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="note"><dt><b>Note:</b></dt><dd>Funkcje opisane poniżej są zgodne ze starą wersją Gadu-Gadu. Nowy sposób przesyłania plików i przeprowadzania rozmów głosowych, wprowadzony w Gadu-Gadu 7.x, obsługiwany jest <a class="el" href="group__dcc7.html">innymi funkcjami</a>.</dd></dl>
<p>Gadu-Gadu, w przeciwieństwie do protokołów takich jak IRC, umożliwia połączenia w obie strony, bez względu na to, który klient nadaje, a który odbiera. Do tego, jeśli obie strony łączą się do serwera z tego samego <b>publicznego</b> adresu IP, serwer przesyła im ich adresy lokalne.</p>
<p>Ze względu na kierunek i sposób połączenia, wyróżniamy kilka sytuacji:</p>
<ul>
<li>Mamy publiczny lub niepubliczny adres IP i chcemy wysłać plik do osoby z publicznym adresem -- łączymy się z jego klientem, przedstawiamy się, mówimy czego chcemy i jeśli druga strona to zaakceptuje, zaczynam wysyłać plik. Przypomina zwykłe połączenia DCC klientów IRC.</li>
</ul>
<ul>
<li>Mamy publiczny adres IP i wysyłam plik do kogoś za NAT -- wysyłamy na jego numer odpowiednią wiadomość przeznaczoną dla klienta (klasa <code>GG_CLASS_CTCP</code>). Druga strona po odebraniu takiego pakietu łączy się znaku o kodzie <code>0x02</code>. druga strona, odebrawszy taki pakiet łączy się z nami, mówi, że proszono ją o połączenie i czeka na dalsze instrukcje. My wtedy wysyłamy informację, że owszem, chcemy wysłać plik, mówimy jaki i jeśli druga strona to zaakceptuje, nadajemy.</li>
</ul>
<ul>
<li>Mamy niepubliczny adres IP, tak samo jak i druga strona -- tutaj nawiązanie połączenia jest możliwe tylko i wyłącznie, gdy oba klienty znajdują się w tej samej sieci (tj. oba łączą się z serwerem z tego samego adresu zewnętrznego) i wygląda to wtedy identycznie jak w punkcie pierwszym.</li>
</ul>
<p>To, czy możemy się z kimś połączyć widać po porcie połączeń bezpośrednich drugiej strony, jaki dostajemy w zdarzeniach o zmianie statusu. Jeśli port jest niższy od 10, połączenie nie jest możliwe i należy wysłać specjalną wiadomość za pomocą funkcji <code><a class="el" href="group__dcc6.html#ga2a4b4a2ad85a06ba5f2e9c451dc29b6f" title="Wysyła żądanie zwrotnego połączenia bezpośredniego.">gg_dcc_request()</a></code>.</p>
<p>Każde połączenie bezpośrednie i gniazdo nasłuchujące opisywane jest przez strukturę <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code>. To ostatnie możemy stworzyć za pomocą:</p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span><a class="code" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a> *gniazdo;

gniazdo = <a class="code" href="group__dcc6.html#ga1f9f10d4d70adeed7e76423fc047c95e" title="Tworzy gniazdo nasłuchujące dla połączeń bezpośrednich.">gg_dcc_socket_create</a>(numer_gg, port_nasłuchujący);

<span class="keywordflow">if</span> (!gniazdo)
    błąd(<span class="stringliteral">&quot;Nie można utworzyć gniazda&quot;</span>);

dodaj_do_obserwowanych(gniazdo);
</pre></div><p>Jeśli podamy port 0, libgadu spróbuje znaleźć pierwszy wolny port w okolicy domyślnego portu połączeń bezpośrednich. W przypadku powodzenia zwraca zaalokowaną strukturę <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code>, której najbardziej interesującym polem <code>port</code> zawierające numer przyznanego portu. Jeśli zwróci <code>NULL</code>, w zmiennej systemowej <code>errno</code> znajdzie się powód błędu: <code>EINVAL</code> to niewłaściwie parametry, <code>ENOMEM</code> to brak pamięci, a reszta możliwych błędów to błędy związane z gniazdami, np. <code>EADDRINUSE</code> gdy nie można znaleźć wolnego portu.</p>
<p>Następnie należy w zmiennej globalnej <code>gg_dcc_port</code> ustawić zaalokowany port, do zmiennej <code>gg_dcc_ip</code> wpisać publiczny adres IP i połączyć się z serwerem, żeby poinformować świat o swoich namiarach. Jeśli publiczny adres IP to <code>255.255.255.255</code>, automatycznie jest przypisywany adres IP, z którego wychodzi połączenie do serwera. Należy pamiętać, że wartości tych zmiennych są używane przez <code><a class="el" href="group__login.html#gaf231ccc428422f1b9e14e7c6ed65d1c4" title="Łączy się z serwerem Gadu-Gadu.">gg_login()</a></code>, więc ich wartości trzeba ustawić przez połączeniem.</p>
<p>Po połączeniu obserwujemy deskryptor gniazda nasłuchującego i gdy coś się pojawi, wywołujemy:</p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span><a class="code" href="structgg__event.html" title="Opis zdarzenia.">gg_event</a> *zdarzenie;

zdarzenie = <a class="code" href="group__dcc6.html#ga9804ea6dffcb077cd5f7a90d4120dc9b" title="Funkcja wywoływana po zaobserwowaniu zmian na deskryptorze połączenia.">gg_dcc_watch_fd</a>(gniazdo);

<span class="keywordflow">if</span> (!zdarzenie) {
    usuń_z_obserwowanych(gniazdo);
    <a class="code" href="group__dcc6.html#ga5d4489eadc5c531a60a9905894fda6b3" title="Zwalnia zasoby używane przez połączenie bezpośrednie.">gg_dcc_free</a>(gniazdo);
    
    błąd(<span class="stringliteral">&quot;Poważny błąd!&quot;</span>);
}
</pre></div><p>Błąd jest zwracany tylko w naprawdę krytycznych sytuacjach, gdy brakuje pamięci, lub nie powiodła się operacja na gniazdach, która nie miała się nie powieść (i przy okazji dalsza praca jest kompletnie bezcelowa).</p>
<p>Jeśli błędu nie będzie, dostaniemy informacje o zdarzeniu. W przypadku <code>GG_SESSION_DCC_SOCKET</code> mogą to być:</p>
<ul>
<li><code>GG_EVENT_NONE</code> -- nic ciekawego się nie wydarzyło.</li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_ERROR</code> -- wystąpił błąd, którego kod znajduje się w polu <code>dcc_error</code> struktury zdarzenia. W przypadku tego typu sesji możliwy jest tylko G<code>G_ERROR_DCC_HANDSHAKE</code>, który mówi, że nie udało się porozumieć z klientem, który się połączył.</li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_NEW</code> -- nowe połączenie bezpośrednie. W polu <code>dcc_new</code> struktury zdarzenia jest struktura <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> typu <code>GG_SESSION_DCC</code>, którą dodajemy do listy obserwowanych.</li>
</ul>
<p>W każdym z tych wypadków należy po sprawdzeniu zdarzenia wywołać funkcję...</p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__events.html#ga1845d4710eede4aaef1c52c4111fbda1" title="Zwalnia pamięć zajmowaną przez informację o zdarzeniu.">gg_event_free</a>(zdarzenie);
</pre></div><p>...by zwolnić pamięć po zdarzeniu.</p>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<p>Gdy nadejdzie połączenie i dopiszemy je do listy obserwowanych, należy zwracać uwagę na następujące zdarzenia:</p>
<ul>
<li><code>GG_EVENT_NONE</code> -- nic się nie zdarzyło.</li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_CLIENT_ACCEPT</code> -- klient się przedstawił i czeka na autoryzację połączenia. Sprawdzamy w strukturze <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> pole <code>uin</code> jest naszym numerem, a <code>peer_uin</code> jest na naszej liście kontaktów i czy chcemy z nim nawiązywać połączenie. Jeśli nie, to po prostu usuwamy połączenie: <div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> (!połączenie_dozwolone(dcc-&gt;uin, dcc-&gt;peer_uin)) {
    usuń_z_obserwowanych(dcc);
    <a class="code" href="group__dcc6.html#ga5d4489eadc5c531a60a9905894fda6b3" title="Zwalnia zasoby używane przez połączenie bezpośrednie.">gg_dcc_free</a>(dcc);
}
</pre></div></li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_CALLBACK</code> -- poprosiliśmy klienta, żeby się z nami połączył za pomocą <a class="el" href="group__dcc6.html#ga2a4b4a2ad85a06ba5f2e9c451dc29b6f" title="Wysyła żądanie zwrotnego połączenia bezpośredniego.">gg_dcc_request()</a> i on teraz pyta się, czego chcemy. Zaraz po tym zdarzeniu należy wywołać funkcję: <div class="fragment"><pre class="fragment"><a class="code" href="group__dcc6.html#ga2b05f4bc46937c62e0794af8b344d9b4" title="Ustawia typ przychodzącego połączenia bezpośredniego.">gg_dcc_set_type</a>(dcc, rodzaj);
</pre></div> gdzie <code>connection_type</code> to <code>GG_SESSION_DCC_SEND</code> lub <code>GG_SESSION_DCC_VOICE</code>. Jeśli wysyłamy plik, można od razu wywołać <code><a class="el" href="group__dcc6.html#gae3da65bbe7c3218cb2e502f021032b68" title="Wypełnia pola struktury gg_dcc niezbędne do wysłania pliku.">gg_dcc_fill_file_info()</a></code>, ale nie jest to wymagane. Kiedy przyjdzie pora, biblioteka sama nas o to poprosi.</li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_NEED_FILE_ACK</code> -- klient chce wysłać nam plik. W polu <code>file_info</code> struktury <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> znajdują się wszystkie informacje na temat pliku, jak jego nazwa, rozmiar, atrybuty, data i czas utworzenia itp. Jeśli nie chcemy pliku, zamykamy połączenie w podobny sposób jak przy braku autoryzacji -- zamykamy połączenie, ponieważ biblioteka nie potrafi odpowiadać negatywnie na prośby połączeń bezpośrednich. Jeśli plik nas interesuje, otwieramy lokalnie plik do zapisu i numer jego deskryptora zapisujemy do <code>file_fd</code> w strukturze <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code>. Jeśli chcemy wznowić przerwany transfer, otwieramy plik w trybie dopisywania i do pola <code>offset</code> wpisujemy ile bajtów już mamy. Biblioteka dalej się wszystkim zajmie.</li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_NEED_FILE_INFO</code> -- wcześniej poprosiliśmy drugą stronę by się z nami połączyła, bo jest za NAT, a my chcemy wysłać plik. Możemy albo sami wypełnić strukturę <code>file_info</code>, którą biblioteka wyśle drugiej stronie, albo skorzystać z funkcji <code><a class="el" href="group__dcc6.html#gae3da65bbe7c3218cb2e502f021032b68" title="Wypełnia pola struktury gg_dcc niezbędne do wysłania pliku.">gg_dcc_fill_file_info()</a></code>. <div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> (<a class="code" href="group__dcc6.html#gae3da65bbe7c3218cb2e502f021032b68" title="Wypełnia pola struktury gg_dcc niezbędne do wysłania pliku.">gg_dcc_fill_file_info</a>(dcc, nazwa_pliku)) {
    błąd(<span class="stringliteral">&quot;Nie można otworzyć pliku&quot;</span>);
    usuń_z_obserwowanych(dcc);
    <a class="code" href="group__dcc6.html#ga5d4489eadc5c531a60a9905894fda6b3" title="Zwalnia zasoby używane przez połączenie bezpośrednie.">gg_dcc_free</a>(dcc);
}
</pre></div></li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_DONE</code> -- zakończono transfer. Można przestać obserwować deskryptor i zwolnić zasoby po połączeniu.</li>
</ul>
<ul>
<li><code>GG_EVENT_DCC_ERROR</code> -- błąd. Możliwy kod błędu to <code>GG_ERROR_DCC_HANDSHAKE</code>, gdy nie powiodło się ustanowienie połączenia z klientem, <code>GG_ERROR_DCC_NET</code> kiedy nie udało się wysłać lub odczytać czegoś z gniazda, <code>GG_ERROR_DCC_FILE</code> gdy nie można było odczytać albo zapisać do pliku, <code>GG_ERROR_DCC_EOF</code> gdy plik lub połączenie zbyt wcześnie się skończy, <code>GG_ERROR_DCC_REFUSED</code> gdy użytkownik po drugiej stronie odmówił połączenia.</li>
</ul>
<p>Tutaj również należy pamiętać o wywoływaniu <code><a class="el" href="group__events.html#ga1845d4710eede4aaef1c52c4111fbda1" title="Zwalnia pamięć zajmowaną przez informację o zdarzeniu.">gg_event_free()</a></code>.</p>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<p>Jeśli chcemy sami wysłać plik, sprawdzamy najpierw, czy druga strona może przyjąć połączenie, patrząc na jej port. Jeśli jest wyższy niż 10, możemy śmiało wywołać funkcję:</p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span><a class="code" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a> *dcc;

dcc = <a class="code" href="group__dcc6.html#ga9e87148a79e8efa4890be95860c425f4" title="Rozpoczyna wysyłanie pliku.">gg_dcc_send_file</a>(adres_odbiorcy, port_odbiorcy, numer_wlasny, numer_odbiorcy);

<span class="keywordflow">if</span> (!dcc)
    błąd(<span class="stringliteral">&quot;Nie można ustanowić połączenia&quot;</span>);
</pre></div><p>Zaraz potem możemy wywołać funkcję <code><a class="el" href="group__dcc6.html#gae3da65bbe7c3218cb2e502f021032b68" title="Wypełnia pola struktury gg_dcc niezbędne do wysłania pliku.">gg_dcc_fill_file_info()</a></code>, by uzupełnić informację o pliku...</p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__dcc6.html#gae3da65bbe7c3218cb2e502f021032b68" title="Wypełnia pola struktury gg_dcc niezbędne do wysłania pliku.">gg_dcc_fill_file_info</a>(conn, filename);
</pre></div><p>...ale jeśli tego nie zrobimy teraz, biblioteka poprosi nas o to w odpowiedniej za pomocą zdarzenia <code>GG_EVENT_DCC_NEED_FILE_INFO</code>.</p>
<p>Jeśli port jest podejrzanie niski, znaczy że połączenie jest niemożliwe i wtedy wywołujemy funkcję:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__dcc6.html#ga2a4b4a2ad85a06ba5f2e9c451dc29b6f" title="Wysyła żądanie zwrotnego połączenia bezpośredniego.">gg_dcc_request</a>(sesja, numer_odbiorcy);
</pre></div><p>gdzie <code>session</code> to nasza sesja Gadu-Gadu (musi być połączona), a <code>peer_uin</code> to numer drugiej strony. Wiadomość spowoduje, że druga strona spróbuje się z nami połączyć, jeśli ma taką możliwość.</p>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<p>Gdy otrzymamy wiadomość klasy <code>GG_CLASS_CTCP</code> o treści składającej się z bajtu 0x02 znaczy, że ktoś chce nam coś przesłać i mamy się z nim połączyć. Wywołujemy wtedy:</p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span><a class="code" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a> *dcc;

dcc = <a class="code" href="group__dcc6.html#gab71b56ab1af27f6c9c45d03d43effea5" title="Rozpoczyna odbieranie pliku przez zwrotne połączenie bezpośrednie.">gg_dcc_get_file</a>(adres_nadawcy, port_nadawcy, numer_wlasny, numer_nadawcy);

<span class="keywordflow">if</span> (!dcc)
    błąd(<span class="stringliteral">&quot;Nie można ustanowić połączenia&quot;</span>);
</pre></div><p>Dalej tak samo, jak przy zwykłym odbieraniu pliku. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga2a4b4a2ad85a06ba5f2e9c451dc29b6f"></a><!-- doxytag: member="dcc.c::gg_dcc_request" ref="ga2a4b4a2ad85a06ba5f2e9c451dc29b6f" args="(struct gg_session *sess, uin_t uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__session.html">gg_session</a> *&nbsp;</td>
          <td class="paramname"> <em>sess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>uin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wysyła żądanie zwrotnego połączenia bezpośredniego. </p>
<p>Funkcję wykorzystuje się, jeśli nie ma możliwości połączenia się z odbiorcą pliku lub rozmowy głosowej. Po otrzymaniu żądania druga strona spróbuje nawiązać zwrotne połączenie bezpośrednie z nadawcą. <a class="el" href="group__dcc6.html#ga2a4b4a2ad85a06ba5f2e9c451dc29b6f" title="Wysyła żądanie zwrotnego połączenia bezpośredniego.">gg_dcc_request()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sess</em>&nbsp;</td><td>Struktura sesji </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uin</em>&nbsp;</td><td>Numer odbiorcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Patrz <code><a class="el" href="group__messages.html#ga2c03e907a237f1de9a0e22b252e333c5" title="Wysyła wiadomość binarną przeznaczoną dla klienta.">gg_send_message_ctcp()</a></code> </dd></dl>

</div>
</div>
<a class="anchor" id="gae3da65bbe7c3218cb2e502f021032b68"></a><!-- doxytag: member="dcc.c::gg_dcc_fill_file_info" ref="gae3da65bbe7c3218cb2e502f021032b68" args="(struct gg_dcc *d, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_fill_file_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wypełnia pola struktury <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> niezbędne do wysłania pliku. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Większą funkcjonalność zapewnia funkcja <code><a class="el" href="group__dcc6.html#gacb0489366604e61863ca167173f16076" title="Wypełnia pola struktury gg_dcc niezbędne do wysłania pliku.">gg_dcc_fill_file_info2()</a></code>.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>Struktura połączenia </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Nazwa pliku</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="gacb0489366604e61863ca167173f16076"></a><!-- doxytag: member="dcc.c::gg_dcc_fill_file_info2" ref="gacb0489366604e61863ca167173f16076" args="(struct gg_dcc *d, const char *filename, const char *local_filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_fill_file_info2 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>local_filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wypełnia pola struktury <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> niezbędne do wysłania pliku. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>Struktura połączenia </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Nazwa pliku zapisywana w strukturze </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_filename</em>&nbsp;</td><td>Nazwa pliku w lokalnym systemie plików</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="gab71b56ab1af27f6c9c45d03d43effea5"></a><!-- doxytag: member="dcc.c::gg_dcc_get_file" ref="gab71b56ab1af27f6c9c45d03d43effea5" args="(uint32_t ip, uint16_t port, uin_t my_uin, uin_t peer_uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_get_file </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>my_uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>peer_uin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Rozpoczyna odbieranie pliku przez zwrotne połączenie bezpośrednie. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td>Adres IP nadawcy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>Port nadawcy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>my_uin</em>&nbsp;</td><td>Własny numer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>peer_uin</em>&nbsp;</td><td>Numer nadawcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="ga9e87148a79e8efa4890be95860c425f4"></a><!-- doxytag: member="dcc.c::gg_dcc_send_file" ref="ga9e87148a79e8efa4890be95860c425f4" args="(uint32_t ip, uint16_t port, uin_t my_uin, uin_t peer_uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_send_file </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>my_uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>peer_uin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Rozpoczyna wysyłanie pliku. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td>Adres IP odbiorcy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>Port odbiorcy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>my_uin</em>&nbsp;</td><td>Własny numer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>peer_uin</em>&nbsp;</td><td>Numer odbiorcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="ga53ac68b8f631a7dff70ba75363a15b2e"></a><!-- doxytag: member="dcc.c::gg_dcc_voice_chat" ref="ga53ac68b8f631a7dff70ba75363a15b2e" args="(uint32_t ip, uint16_t port, uin_t my_uin, uin_t peer_uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_voice_chat </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>my_uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>peer_uin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Rozpoczyna połączenie głosowe. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td>Adres IP odbiorcy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>Port odbiorcy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>my_uin</em>&nbsp;</td><td>Własny numer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>peer_uin</em>&nbsp;</td><td>Numer odbiorcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="ga2b05f4bc46937c62e0794af8b344d9b4"></a><!-- doxytag: member="dcc.c::gg_dcc_set_type" ref="ga2b05f4bc46937c62e0794af8b344d9b4" args="(struct gg_dcc *d, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gg_dcc_set_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ustawia typ przychodzącego połączenia bezpośredniego. </p>
<p>Funkcję należy wywołać po otrzymaniu zdarzenia <code>GG_EVENT_DCC_CALLBACK</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>Struktura połączenia </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Rodzaj połączenia (<code>GG_SESSION_DCC_SEND</code> lub <code>GG_SESSION_DCC_VOICE</code>) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1f9f10d4d70adeed7e76423fc047c95e"></a><!-- doxytag: member="dcc.c::gg_dcc_socket_create" ref="ga1f9f10d4d70adeed7e76423fc047c95e" args="(uin_t uin, uint16_t port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_socket_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&nbsp;</td>
          <td class="paramname"> <em>uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tworzy gniazdo nasłuchujące dla połączeń bezpośrednich. </p>
<p>Funkcja przywiązuje gniazdo do pierwszego wolnego portu TCP.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uin</em>&nbsp;</td><td>Własny numer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>Preferowany port (jeśli równy 0 lub -1, próbuje się domyślnego)</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Ze względu na możliwość podania wartości -1 do parametru będącego 16-bitową liczbą bez znaku, port 65535 nie jest dostępny.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html" title="Połączenie bezpośrednie do wersji Gadu-Gadu 6.x.">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="ga3ec32ead7968e434b54354fe457a8fe1"></a><!-- doxytag: member="dcc.c::gg_dcc_voice_send" ref="ga3ec32ead7968e434b54354fe457a8fe1" args="(struct gg_dcc *d, char *buf, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_voice_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wysyła ramkę danych połączenia głosowego. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>Struktura połączenia </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>Bufor z danymi </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Długość bufora z danymi</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="ga9804ea6dffcb077cd5f7a90d4120dc9b"></a><!-- doxytag: member="dcc.c::gg_dcc_watch_fd" ref="ga9804ea6dffcb077cd5f7a90d4120dc9b" args="(struct gg_dcc *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__event.html">gg_event</a>* gg_dcc_watch_fd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Funkcja wywoływana po zaobserwowaniu zmian na deskryptorze połączenia. </p>
<p>Funkcja zwraca strukturę zdarzenia <code><a class="el" href="structgg__event.html" title="Opis zdarzenia.">gg_event</a></code>. Jeśli rodzaj zdarzenia to <code>GG_EVENT_NONE</code>, nie wydarzyło się jeszcze nic wartego odnotowania. Strukturę zdarzenia należy zwolnić funkcja <code>gg_event_free</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>Struktura połączenia</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura zdarzenia lub <code>NULL</code> jeśli wystąpił błąd </dd></dl>

</div>
</div>
<a class="anchor" id="ga5d4489eadc5c531a60a9905894fda6b3"></a><!-- doxytag: member="dcc.c::gg_dcc_free" ref="ga5d4489eadc5c531a60a9905894fda6b3" args="(struct gg_dcc *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gg_dcc_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Zwalnia zasoby używane przez połączenie bezpośrednie. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>Struktura połączenia </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Oct 31 2013 03:01:23 for libgadu by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
ść bufora z danymi</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Zwraca</dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

</div>
</div>
<a class="anchor" id="ga9804ea6dffcb077cd5f7a90d4120dc9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__event.html">gg_event</a>* gg_dcc_watch_fd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Funkcja wywoływana po zaobserwowaniu zmian na deskryptorze połączenia. </p>
<p>Funkcja zwraca strukturę zdarzenia <code><a class="el" href="structgg__event.html" title="Opis zdarzenia.">gg_event</a></code>. Jeśli rodzaj zdarzenia to <code>GG_EVENT_NONE</code>, nie wydarzyło się jeszcze nic wartego odnotowania. Strukturę zdarzenia należy zwolnić funkcja <code>gg_event_free</code>.</p>
<dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Struktura połączenia</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Zwraca</dt><dd>Struktura zdarzenia lub <code>NULL</code> jeśli wystąpił błąd </dd></dl>

</div>
</div>
<a class="anchor" id="ga5d4489eadc5c531a60a9905894fda6b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gg_dcc_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zwalnia zasoby używane przez połączenie bezpośrednie. </p>
<dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Struktura połączenia </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Wygenerowano Wt, 12 lis 2013 22:28:40 dla libgadu programem &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
